(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08eba654"],{"0409":function(t,e,a){},"0a6c":function(t,e,a){},2341:function(t,e,a){"use strict";var n=a("0a6c"),s=a.n(n);s.a},"23f8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moderation_header"},[a("h1",{staticClass:"moderation_header__h1"},[t._v("Moderation")]),a("div",{staticClass:"moderation_header__tabs"},[a("div",{staticClass:"tab_button",class:{"tab_button--selected":"reports"===t.selectedTab},on:{click:function(e){return t.$router.push("reports")}}},[t._v(" Reports ")]),a("div",{staticClass:"tab_button",class:{"tab_button--selected":"bans"===t.selectedTab},on:{click:function(e){return t.$router.push("bans")}}},[t._v(" Banned users ")])])])},s=[],o={name:"ModerationHeader",props:["selected-tab"]},i=o,l=(a("a86a"),a("2877")),d=Object(l["a"])(i,n,s,!1,null,"04dba6b6",null);e["a"]=d.exports},"39d7":function(t,e,a){},5016:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("menu-tooltip",{staticClass:"select_button",class:{"select_button--touch":!t.touchDisabled},model:{value:t.menuOpen,callback:function(e){t.menuOpen=e},expression:"menuOpen"}},[a("template",{slot:"button"},[t.options.length?a("div",{staticClass:"button button--thin_text",class:{"select_button__button--selected":t.menuOpen},on:{click:function(e){t.menuOpen=!0}}},[t._v(" "+t._s(t.options[t.selectedIndex].name)+" "),a("font-awesome-icon",{staticClass:"button__icon select_button__icon",attrs:{icon:["fa","chevron-down"],"fixed-width":""}})],1):a("div",{staticClass:"button"},[t._v(" No options ")])]),a("template",{slot:"menu"},t._l(t.options,(function(e,n){return a("div",{key:"select-button-option-"+e.name+n,staticClass:"select_button__option",class:{"select_button__option--disabled":e.disabled,"select_button__option--selected":n===t.selectedIndex&&!e.disabled},on:{click:function(a){return t.select(n,e.disabled)}}},[t._v(" "+t._s(e.name)+" ")])})),0)],2)},s=[],o=(a("4160"),a("159b"),a("6fab")),i={name:"SelectButton",props:["options","value","name","touch-disabled"],components:{MenuTooltip:o["a"]},methods:{select:function(t,e){e||(this.selectedIndex=t,this.menuOpen=!1,this.$emit("input",this.options[t].value))},getIndexFromValue:function(){var t=0,e=this;return null!==this.value&&this.options.forEach((function(a,n){a.value===e.value&&(t=n)})),t}},data:function(){return{selectedIndex:this.getIndexFromValue(),menuOpen:!1}},watch:{value:function(){this.selectedIndex=this.getIndexFromValue()}}},l=i,d=(a("2341"),a("2877")),r=Object(d["a"])(l,n,s,!1,null,"5c300c04",null);e["a"]=r.exports},"6e0b":function(t,e,a){"use strict";var n=a("39d7"),s=a.n(n);s.a},"6f58":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overlay_message"},[a("span",{staticClass:"overlay_message__loading"},[a("loading-icon",{attrs:{dark:!0}})],1),t._v(" Loading... ")])},s=[],o=a("c5af"),i={name:"LoadingMessage",components:{LoadingIcon:o["a"]}},l=i,d=a("2877"),r=Object(d["a"])(l,n,s,!1,null,null,null);e["a"]=r.exports},"6fab":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu_tooltip",class:{"menu_tooltip--touch":!t.touchDisabled}},[a("div",{staticClass:"menu_tooltip__overlay",class:{"menu_tooltip__overlay--show":t.value},on:{click:function(e){return t.$emit("input",!1)}}}),t._t("button"),a("div",{staticClass:"menu_tooltip__menu",class:{"menu_tooltip__menu--show":t.value},style:{top:t.top,width:t.width}},[a("div",{staticClass:"menu_tooltip__menu__inner"},[t._t("menu")],2)])],2)},s=[],o={name:"MenuTooltip",props:["value","top","width","touch-disabled"]},i=o,l=(a("6e0b"),a("2877")),d=Object(l["a"])(i,n,s,!1,null,"5bd61e2c",null);e["a"]=d.exports},"877e":function(t,e,a){},a157:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin_moderation"},[a("div",{staticClass:"admin_moderation__header"},[a("moderation-header",{attrs:{"selected-tab":"bans"}}),a("button",{staticClass:"button button--blue",on:{click:t.toggleShowAddNewBanModal}},[t._v("Add new ban")])],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.bans?t.bans.length?a("table",{key:"bans",staticClass:"admin_moderation__table"},[a("tr",[a("th",[t._v("User")]),a("th",[t._v("Ban type")]),a("th",[t._v("Date banned")]),a("th",[t._v("Message")]),a("th",[t._v("Action")])]),t._l(t.bans,(function(e,n){return a("tr",{key:"ban-row-"+n},[a("td",[t._v(t._s(e.User.username))]),a("td",[t._v(t._s(e.type))]),a("td",[t._v(t._s(t._f("formatDate")(e.createdAt)))]),a("td",[e.message?[t._v(t._s(e.message))]:a("i",[t._v("No message given")])],2),a("td",[a("button",{staticClass:"button button--red",on:{click:function(a){return t.deleteBan(e,n)}}},[t._v(" Delete ban ")])])])}))],2):a("div",{key:"no bans",staticClass:"overlay_message"},[a("font-awesome-icon",{attrs:{icon:["fa","thumbs-up"]}}),t._v(" No banned users ")],1):a("loading-message",{key:"loading"})],1),a("modal-window",{attrs:{width:"30rem","no-padding":!0},model:{value:t.$store.state.moderation.showAddNewBanModal,callback:function(e){t.$set(t.$store.state.moderation,"showAddNewBanModal",e)},expression:"$store.state.moderation.showAddNewBanModal"}},[a("div",{staticClass:"admin_moderation__add_new_ban_modal",attrs:{slot:"main"},slot:"main"},[a("div",{staticClass:"admin_moderation__add_new_ban_modal__overlay",class:{"admin_moderation__add_new_ban_modal__overlay--show":t.loading}},[a("loading-icon")],1),a("h2",[t._v("Ban or block a user")]),a("p",[t._v("Search for the user to ban, then select the relevant ban type for the user")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.addBan(e)}}},[a("div",[a("fancy-input",{attrs:{placeholder:"Username to ban",width:"15rem",large:!0},model:{value:t.$store.state.moderation.username,callback:function(e){t.$set(t.$store.state.moderation,"username",e)},expression:"$store.state.moderation.username"}})],1),a("div",[a("fancy-input",{attrs:{placeholder:"Message to user (optional)",width:"15rem",large:!0},model:{value:t.$store.state.moderation.message,callback:function(e){t.$set(t.$store.state.moderation,"message",e)},expression:"$store.state.moderation.message"}})],1),a("div",[a("select-button",{attrs:{options:t.$store.state.moderation.options,name:"test"},model:{value:t.$store.state.moderation.selectedOption,callback:function(e){t.$set(t.$store.state.moderation,"selectedOption",e)},expression:"$store.state.moderation.selectedOption"}})],1),a("input",{staticStyle:{display:"none"},attrs:{type:"submit"}})])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"button button--modal button--green",on:{click:t.addBan}},[t._v(" Add ban ")]),a("button",{staticClass:"button button--modal",on:{click:t.toggleShowAddNewBanModal}},[t._v(" Cancel ")])])])],1)},s=[],o=(a("d81d"),a("a434"),a("498a"),a("6307")),i=a("80e3"),l=a("5016"),d=a("23f8"),r=a("c5af"),c=a("6f58"),u=a("c4b0"),m=a.n(u),_={name:"AdminDashboard",components:{ModalWindow:o["a"],FancyInput:i["a"],SelectButton:l["a"],ModerationHeader:d["a"],LoadingIcon:r["a"],LoadingMessage:c["a"]},data:function(){return{loading:!1,bans_:null}},computed:{bans:function(){return this.bans_?this.bans_.map((function(t){return t.ipBanned?t.type="IP banned":t.canCreateThreads&&!t.canCreatePosts?t.type="Posting replies":t.canCreatePosts&&!t.canCreateThreads?t.type="Creating threads":t.type="Posting replies and creating threads",t})):null}},methods:{toggleShowAddNewBanModal:function(){this.$store.commit("moderation/setModal",!this.$store.state.moderation.showAddNewBanModal),this.$store.dispatch("moderation/clearModal")},addBan:function(){var t=this,e=this.$store.state.moderation,a={username:e.username};e.message.trim().length&&(a.message=e.message),"both"===e.selectedOption?(a.canCreatePosts=!1,a.canCreateThreads=!1):"thread"===e.selectedOption?a.canCreateThreads=!1:"post"===e.selectedOption?a.canCreatePosts=!1:a.ipBanned=!0,this.loading=!0,this.axios.post("/api/v1/ban",a).then((function(e){t.loading=!1,t.bans_.push(e.data),t.toggleShowAddNewBanModal(),t.$store.dispatch("moderation/clearModal")})).catch((function(e){t.loading=!1,m()(t.$store)(e)}))},deleteBan:function(t,e){var a=this;this.axios.delete("/api/v1/ban/"+t.id).then((function(){a.bans_.splice(e,1)})).catch(m()(this.$store))}},mounted:function(){var t=this;this.$store.dispatch("setTitle","admin | moderation"),this.axios.get("/api/v1/ban").then((function(e){t.bans_=e.data})).catch(m()(this.$store))}},b=_,p=(a("b003"),a("2877")),h=Object(p["a"])(b,n,s,!1,null,"615fa9cc",null);e["default"]=h.exports},a86a:function(t,e,a){"use strict";var n=a("877e"),s=a.n(n);s.a},b003:function(t,e,a){"use strict";var n=a("0409"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-08eba654.adf61179.js.map